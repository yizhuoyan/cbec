<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>图片上传器</title>
    <link rel="stylesheet" href="/common.css">
    <style type="text/css">
        .drop-section{
            width: 400px;
            height: 400px;
            border: 1px dashed #999999;
        }
    </style>
</head>
<body class="layout-vbox">
<header class="layout-justify">
    <aside>
        <h5>图片上传</h5>
    </aside>
    <aside>
        <button id="confirmPickBtn">确定选择</button>
    </aside>
</header>
<main class="layout-vbox">
    <textarea id="drag"  class="drop-section">

    </textarea>
</main>
<script src="/common.js"></script>
<script src="controller.js"></script>
<script>

    drag.addEventListener("dragover",function (evt) {
        evt.preventDefault();
        return false;
    });
    drag.addEventListener("drop",function (evt) {
        evt.preventDefault();

        var file = evt.dataTransfer.files[0]; //获取文件
        ajaxFileUpload(file);

        return true;
    });
    
    var ajaxFileUpload=function (file) {
        var url="/common/upload";
        var data=new FormData();
        data.set("file",file,file.name);
        var xhr=new XMLHttpRequest();
        xhr.onreadystatechange=function () {
            console.log(xhr.responseText)
        }
        xhr.open("post",url);
        //xhr.setRequestHeader("content-type","multipart/form-data");
        xhr.send(data);

    } 
</script>
</body>
</html>